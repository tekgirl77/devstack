# Sample ``local.conf`` for user-configurable variables in ``stack.sh``

# NOTE: Copy this file to the root DevStack directory for it to work properly.

# ``local.conf`` is a user-maintained settings file that is sourced from ``stackrc``.
# This gives it the ability to override any variables set in ``stackrc``.
# Also, most of the settings in ``stack.sh`` are written to only be set if no
# value has already been set; this lets ``local.conf`` effectively override the
# default values.

# This is a collection of some of the settings we have found to be useful
# in our DevStack development environments. Additional settings are described
# in http://devstack.org/local.conf.html
# These should be considered as samples and are unsupported DevStack code.

# The ``localrc`` section replaces the old ``localrc`` configuration file.
# Note that if ``localrc`` is present it will be used in favor of this section.
[[local|localrc]]
#OFFLINE=True
RECLONE=True

#--------------------------------
# Using stable/mitaka Branch
#--------------------------------
CINDER_BRANCH=stable/mitaka
GLANCE_BRANCH=stable/mitaka
HEAT_BRANCH=stable/mitaka
HORIZON_BRANCH=stable/mitaka
KEYSTONE_BRANCH=stable/mitaka
KEYSTONECLIENT_BRANCH=stable/mitaka
NEUTRON_BRANCH=stable/mitaka
NOVA_BRANCH=stable/mitaka
NOVACLIENT_BRANCH=stable/mitaka
SWIFT_BRANCH=stable/mitaka

#--------------------------------
# Plugins to extend configuration
#--------------------------------

# Enable Ceilometer (Telemetry Monitoring)
ENABLE_SERVICES+=,ceilometer-acompute,ceilometer-acentral,ceilometer-collector,ceilometer-api
CEILOMETER_BACKEND=mongodb
enable_plugin ceilometer https://git.openstack.org/openstack/ceilometer stable/mitaka
# Enable AODH with Ceilometer (for Alarms)
enable_plugin aodh https://git.openstack.org/openstack/aodh stable/mitaka
# Enable Ceilometer Profiler Notifier
CEILOMETER_NOTIFICATION_TOPICS=notifications,profiler

# Enable Designate (DNSaaS)
# designate-dashboard is installed by designate devstack plugin
enable_plugin designate https://git.openstack.org/openstack/designate stable/mitaka
DESIGNATE_BRANCH=stable/mitaka
DESIGNATEDASHBOARD_BRANCH=stable/mitaka

# Enable Heat (Orchestration)
ENABLE_SERVICES+=,heat,h-api,h-api-cfn,h-api-cw,h-eng
# Download images Heat can launch - URLs for any cloud image may be specified, 
# but fedora images from F20 contain the heat-cfntools package which is required for some heat functionality.
IMAGE_URL_SITE="https://download.fedoraproject.org/"
IMAGE_URL_PATH="/pub/fedora/linux/releases/23/Cloud/x86_64/Images/"
IMAGE_URL_FILE="Fedora-Cloud-Base-23-20151030.x86_64.qcow2"
IMAGE_URLS+=","$IMAGE_URL_SITE$IMAGE_URL_PATH$IMAGE_URL_FILE

# Enable Trove (Database)
enable_plugin trove git://git.openstack.org/openstack/trove stable/mitaka
enable_plugin trove-dashboard git://git.openstack.org/openstack/trove-dashboard stable/mitaka

# Enable Swift (Object Storage)
ENABLE_SERVICES+=,s-proxy,s-object,s-container,s-account
# For development purposes the default of 3 replicas is usually not required.
# Set this to 1 to save some resources:
SWIFT_REPLICAS=1

#-------------------------------
# Common Configurations
#-------------------------------

HOST_IP=192.168.1.15
SERVICE_HOST=192.168.1.15
MYSQL_HOST=192.168.1.15
RABBIT_HOST=192.168.1.15
GLANCE_HOSTPORT=192.168.1.15:9292
ADMIN_PASSWORD=secret
DATABASE_PASSWORD=secret
RABBIT_PASSWORD=secret
SERVICE_PASSWORD=secret
SWIFT_HASH=secret

# Do not use Nova-Network since we are using Neutron networking
disable_service n-net
# Enable Neutron
ENABLED_SERVICES+=,q-svc,q-dhcp,q-meta,q-agt,q-l3

# Enable LBaaS v2
ENABLED_SERVICES+=,q-lbaasv2
ENABLED_SERVICES+=,octavia,o-cw,o-hk,o-hm,o-api
# Load the external LBaaS plugin
enable_plugin neutron-lbaas https://git.openstack.org/openstack/neutron-lbaas stable/mitaka
enable_plugin octavia https://git.openstack.org/openstack/octavia stable/mitaka


## Neutron options
Q_USE_SECGROUP=True
FLOATING_RANGE="192.168.1.0/24"
FIXED_RANGE="10.0.0.0/24"
Q_FLOATING_ALLOCATION_POOL=start=192.168.1.100,end=192.168.1.200
PUBLIC_NETWORK_GATEWAY="192.168.1.6"
PUBLIC_INTERFACE=eth0

# Open vSwitch provider networking configuration
Q_USE_PROVIDERNET_FOR_PUBLIC=True
OVS_PHYSICAL_BRIDGE=br-ex
PUBLIC_BRIDGE=br-ex
OVS_BRIDGE_MAPPINGS=public:br-ex

#Keystone Version - v2 is deprecated, force use of v3
ENABLE_IDENTITY_V2=False

# Using git versions of clients
# ------------------------------
# By default clients are installed from pip.  See LIBS_FROM_GIT in
# stackrc for details on getting clients from specific branches or
# revisions.  e.g.
# Use latest python-openstackclient to address bug: https://bugs.launchpad.net/python-openstackclient/+bug/1447704
# https://git.openstack.org/cgit/openstack/python-openstackclient/commit/?id=b8432408e68855d7ce9269b7e681de3c5b733b09
LIBS_FROM_GIT="python-openstackclient"
HORIZONAUTH_BRANCH=stable/mitaka

# Exercises
ACTIVE_TIMEOUT==300
BOOT_TIMEOUT=300

#-------------------------------
# Devstack configurations
#-------------------------------
LOGDIR=$DEST/logs
SCREEN_LOGDIR=$LOGDIR
SCREEN_HARDSTATUS="%{= rw} %H %{= wk} %L=%-w%{= bw}%30L> %n%f %t*%{= wk}%+Lw%-17< %-=%{= gk} %y/%m/%d %c"
LOGFILE=$LOGDIR/devstack.log
LOGDAYS=1
#LOG_COLOR=False
VERBOSE=True
ENABLE_DEBUG_LOG_LEVEL=True

[[post-config|/etc/neutron/dhcp_agent.ini]]
# The DHCP server can assist with providing metadata support on isolated
# networks. Setting this value to True will cause the DHCP server to append
# specific host routes to the DHCP request. The metadata service will only
# be activated when the subnet does not contain any router port. The guest
# instance must be configured to request host routes via DHCP (Option 121).
[DEFAULT]
enable_isolated_metadata = True

